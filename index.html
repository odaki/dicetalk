<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã‚µã‚¤ã‚³ãƒ­ãƒˆãƒ¼ã‚¯</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" sizes="180x180" />
    <link
      rel="icon"
      type="image/png"
      href="android-touch-icon.png"
      sizes="192x192"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="jquery.qrcode.min.js"></script>
    <script src="encoding.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2/dist/confetti.browser.min.js"></script>
    <script>
      //æ€’ã‚Šã®è©±
      const odai_ikari = [
        "ã‚ã‚Šãˆãªã„è©±",
        "è…¹ã®ç«‹ã¤è©±",
        "æ€’ã£ãŸè©±",
        "ã‚ãã‚Œã¦ã‚‚ã®ã‚‚è¨€ãˆãªã„è©±",
        "ã©ã†ã§ã‚‚ã„ã„è©±",
        "ä½•ã ã€ãã‚Œ?",
        "ã‚‚ã†ã‚¦ãƒ³ã‚¶ãƒª",
      ];

      //å“€ã‚Œã®è©±
      const odai_aware = [
        "æƒ…ã‘ãªã„è©±",
        "ã‚·ãƒ£ãƒ¬ã«ãªã‚‰ãªã„è©±",
        "ãƒ›ãƒ³ãƒˆã«æƒ…ã‘ãªã„è©±",
        "æ¥ãšã‹ã—ã„è©±",
        "æ¥ã‚‚æ¶™ã‚‚æ¨ã¦ãŸè©±",
        "ä»Šã ã‹ã‚‰ã‚´ãƒ¡ãƒ³ãƒŠã‚µã‚¤è©±",
        "ã‚¢ãƒƒã€ã‚„ã£ã¡ã‚ƒã£ãŸ!",
        "ã‚ã‚Šã‚ƒã‚Šã‚ƒ!?",
        "ãã‚“ãªç„¡èŒ¶ãª!",
        "ã¸ã“ã‚“ã è©±",
        "ã‚·ãƒ§ãƒƒã‚¯ãªè©±",
        "ç—›ã‹ã£ãŸè©±",
        "ã‚·ãƒ¥ãƒ³ã¨ã—ãŸè©±",
        "ä¿¡ã˜ã¦ã‚‚ã‚‰ãˆãªã„è©±",
        "å‡ºæ¥ã‚Œã°è¨€ã„ãŸããªã„è©±",
        "è¨€ã„è¨³ã•ã›ã¦ä¸‹ã•ã„",
        "è‹¥æ°—ã®è‡³ã‚Šè©±",
        "ã“ã‚“ãªãƒã‚ºã˜ã‚ƒãªã‹ã£ãŸ",
      ];

      //â—‹â—‹ã®è©±
      const odai_marumaru = [
        "åˆã‚ã¦â—‹â—‹ã—ãŸè©±",
        "ç§ã¯â—‹â—‹ã®é”äºº",
        "ãã£ã‹ã‘ã¯â—‹â—‹",
        "â—‹â—‹ã¯ã˜ã‚ã¾ã—ãŸ",
        "ã“ã†ã¿ãˆã¦ã‚‚â—‹â—‹ã—ãŸè©±",
        "ã“ã†ã¿ãˆã¦ã‚‚ç§â—‹â—‹ãªã‚“ã§ã™",
        "æ—¬ãªãã£ã‹ã‘ã¯â—‹â—‹",
        "â—‹â—‹ã•ã‚“ã«è¨€ã„ãŸã„äº‹",
        "â—‹â—‹ã‚’æ„›ã™ã‚‹è©±",
      ];

      //ã€Œç§ã€ã®èªãŒã‚ã‚‹è©±
      const odai_watashi = [
        "ç§ã€ã“ã£ã¦ã¾ã™",
        "ç§ã‚’å¤‰ãˆãŸã‚ã®äºº",
        "ç§ã€å¤‰ã‚ã‚Šã¾ã—ãŸ",
        "ç§ãƒã‚«ã‚ˆã­",
        "ç§ã®å¼±ç‚¹",
        "ç§ã®ç§˜å¯†",
        "ç§ã®ã‚¯ã‚¤ã‚º",
        "ç§ã®å‘¨ã‚Šã®å¤‰ãªäºº",
        "ç§ã ã‘ã®ãƒ«ãƒ¼ãƒ«",
        "ã²ã‚‡ã£ã¨ã—ãŸã‚‰ç§ã ã‘",
        "ç§ã®é‡å¤§ãƒ‹ãƒ¥ãƒ¼ã‚¹",
        "ç§ã®å¾—æ„æ–™ç†",
      ];

      //é©šãã®è©±
      const odai_odoroki = [
        "é©šã„ãŸè©±",
        "ä¿¡ã˜ã‚‰ã‚Œãªã„è©±",
        "ã‚‚ã†å¤§å¤‰!",
        "ãƒ‰ãƒ’ãƒ£ãƒ¼!",
        "ã‚¢ç„¶ã¨ã—ãŸè©±",
        "å±æ©Ÿä¸€é«ª",
        "ãƒ‘ãƒ‹ãã£ãŸè©±",
      ];

      //æ³£ã‘ã‚‹è©±
      const odai_nakeru = [
        "ã†ã‚‹ã†ã‚‹ã—ãŸè©±",
        "ã›ã¤ãªã„è©±",
        "å¹¸ã›ã ã¨â€¦æ€ã†è©±",
        "æ¶™ã—ãŸè©±",
        "æ„Ÿè¬ã—ãŸè©±",
        "ãŠä¸–è©±ã«ãªã‚Šã¾ã—ãŸ",
        "ã‚ã‚ŠãŒã¨ã†",
        "ç§ã®å‚·è·¡",
      ];

      //å¹¸ç¦ã®è©±
      const odai_koufuku = [
        "æ‹ã®è©±",
        "æ‹æ„›è©±",
        "æ‹ã®å‘Šç™½",
        "ã‚«ãƒ¯ã‚¤ã‚¤è©±",
        "è‡ªåˆ†ã‚’ã»ã‚ã¦ã‚ã’ãŸã„è©±",
        "ãƒ ãƒ•ãƒ•",
        "ã®ã‚ã‘è©±",
        "ç¬‘ãˆã‚‹è©±",
        "ã”ãã’ã‚“ãªè©±",
        "ã‚¦ã‚­ã‚¦ã‚­ã—ãŸè©±",
        "ã¡ã‚‡ã£ã¨ã‚¤ã‚¤è©±",
        "ãŠã„ã—ã„è©±",
        "å¥½ããªäººã®è©±",
        "ãƒ‰ãƒ¤é¡”ã—ãŸè©±",
        "ã„ã„ã­!ã¨æ€ã£ãŸè©±",
        "æ˜¨æ—¥ã®é¢ç™½ã„è©±",
        "ãƒ©ãƒ–ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¯çªç„¶ã«",
        "ã‚„ã£ã±ã‚¹ã‚­ã‚„ã­ã‚“",
        "å¥½ããªã‚“ã ã‘ã©",
        "è¶…ãƒ©ãƒ–ãƒ©ãƒ–",
        "ãƒ¡ãƒ©ãƒ¡ãƒ©ç‡ƒãˆã‚‹æ‹",
        "è‡ªæ…¢è©±",
        "å°ã•ãªå¹¸ã›",
      ];

      //ææ€–ã®è©±
      const odai_kyoufu = [
        "æ€–ã„è©±",
        "æ—¬ãªæ€–ã„è©±",
        "ãƒ”ãƒ³ãƒ!",
        "ã¨ã‚“ã§ã‚‚ãªã„è©±",
        "é³¥è‚Œã®ç«‹ã¤è©±",
        "ãƒ’ãƒ¤ãƒƒã¨ã—ãŸè©±",
        "ãƒ‰ã‚­ãƒƒã¨ã—ãŸè©±",
        "ã³ã³ã£ãŸè©±",
      ];

      //ãã®ä»–ã®è©±
      const odai_sonota = [
        "æ—¬ãªè©±",
        "å¿˜ã‚Œã‚‰ã‚Œãªã„è©±",
        "ãŸã¾ã«æ€ã„å‡ºã™è©±",
        "ã“ã“ã ã‘ã®è©±",
        "å°ã•ãªæ‚©ã¿",
        "ã“ã“ã ã‘ã¯è­²ã‚Œãªã„",
        "ã¤ã„ã¤ã„",
        "åˆä½“é¨“",
        "ã§ã£ã‹ã„è©±ãƒ»ã¡ã£ã¡ã‚ƒã„è©±",
        "ã‚¢ã‚²ã‚¢ã‚²ãªè©±ãƒ»ã‚µã‚²ã‚µã‚²ãªè©±",
        "èŠ¸èƒ½ç•Œã®å‹é”ã®è©±",
        "ã²ã¨ã¤ã€å‹‰å¼·ã«ãªã£ãŸè©±",
        "æ°—ã«ãªã£ã¦ã—ã‚‡ã†ãŒãªã„äº‹",
        "ã“ã‚Œã€ã¯ã˜ã‚ã¦è©±ã—ã¾ã™",
        "å›½éš›çš„ãªè©±",
        "å¿ƒã‚ˆã‚ŠãŠé¡˜ã„ç”³ã—ä¸Šã’ã¾ã™",
        "ä»Šã•ã‚‰ã§ã™ãŒ",
        "æœ€è¿‘ã€ã©ã†?",
        "æœ€è¿‘ã€è‹¥ã„äººã®è©±",
        "æœ€è¿‘ã€æ°—ã«ãªã£ã¦ã—ã‚‡ã†ãŒãªã„äº‹",
        "å¤‰ãªå¤¢",
        "ã¾ã‚‹ã§å¤¢ã®ã‚ˆã†ãªè©±",
        "ã†ã‚ã•è©±",
        "ãªã‚‹ã»ã©ã­ã‡",
        "ã‚„ã‚ã‚‰ã‚Œãªã„è©±",
        "å¤ã®æ€ã„å‡º",
        "æ€ã„å‡ºã®æ›²",
        "çŸ­ã„è©±",
        "ã‚‚ã—ã‚‚â€¦",
        "çš†ã•ã‚“ã€ã©ã†æ€ã„ã¾ã™?",
        "ã“ã‚Œã¨ã„ã£ã¦ã‚ªãƒã®ãªã„è©±",
        "ãŠæ˜¼ã‹ã‚‰ã™ã„ã¾ã›ã‚“",
        "æ˜”ã®ä¸€å¤§äº‹",
        "ä»–ã®ç•ªçµ„ã§ã®è©±",
        "æ€¥ã«æ€ã„å‡ºã—ãŸè©±",
        "ç§ã®ãƒ—ãƒè‡ªæ…¢",
        "ã‚½ãƒã‚‚ãƒ¯ãƒ«ã‚ˆã®ã‰ã€œ",
        "ç•™å®ˆç•ªé›»è©±",
        "ã‚‚ã®ã¾ã­!",
        "ä¸–ç•Œã«ã²ã¨ã¤ã ã‘ã®ã¯ãªã—",
        "ã©ã†ã§ã‚‚ã„ã„è©±",
        "è‡ªåˆ†ã®æ€§æ ¼ãŒå‡ºãŸè©±",
        "ã˜ã¤ã®åã‚’ã‚ã’ã‚‰ã‚Œãªã„è©±",
        "çˆ†å¼¾ç™ºè¨€",
        "ç§˜å¯†æ•™ãˆã¾ã™",
        "ãƒˆã‚¯ã™ã‚‹è©±",
      ];

      const numstr_ascii = ["[1]", "[2]", "[3]", "[4]", "[5]", "[6]"];
      const numstr_utf8 = ["â¶", "â·", "â¸", "â¹", "âº", "â»"];
      const dicestr_utf8 = ["âš€", "âš", "âš‚", "âšƒ", "âš„", "âš…"];

      var odai = [];
      var odai_num = 0;
      var odai_set = [];
      var odai_set_num = 0;
      var odai_selected_num = 0;

      function getCurrentTimeStr() {
        const daystr = ["æ—¥", "æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"];
        let nowdate = new Date();

        let year = nowdate.getYear();
        let mon = nowdate.getMonth() + 1;
        let date = nowdate.getDate();
        let day = nowdate.getDay();
        let hour = nowdate.getHours();
        let min = nowdate.getMinutes();
        let sec = nowdate.getSeconds();

        return (
          mon +
          "æœˆ" +
          date +
          "æ—¥(" +
          daystr[day] +
          ") " +
          hour +
          "æ™‚" +
          min +
          "åˆ†"
        );
      }

      function getOneOdai() {
        let n = odai.length;
        let r = Math.floor(Math.random() * n);
        return odai.splice(r, 1);
      }

      function initOdai() {
        odai = [];
        odai = odai.concat(
          odai_ikari,
          odai_aware,
          odai_marumaru,
          odai_watashi,
          odai_odoroki,
          odai_nakeru,
          odai_koufuku,
          odai_kyoufu,
          odai_sonota
        );
        let nowdate = new Date();
        let mon = nowdate.getMonth() + 1;
        if (mon == 12) {
          odai.push("ä»Šå¹´ã®é‡å¤§ãƒ‹ãƒ¥ãƒ¼ã‚¹");
          odai.push("ä»Šå¹´ã‚„ã‚Šæ®‹ã—ãŸã“ã¨");
        }
        odai_num = odai.length;
        odai_set_num = odai_num / 6;
        odai_set = new Array(odai_set_num);
        for (let j = 0; j < odai_set_num; j++) {
          odai_set[j] = [];
          for (let i = 0; i < 6; i++) {
            odai_set[j].push(getOneOdai());
          }
        }
        odai_selected_num = 0;
      }

      function setOdaiQR() {
        let div = document.getElementById("qrcode");
        div.innerHTML = "";

        let utf8Text = document.getElementById("odaistring_qr").innerText;
        let qrtext = Encoding.convert(utf8Text, "SJIS", "UNICODE");
        $("#qrcode").qrcode(qrtext);
      }

      function setOdai() {
        var odai_list = [];
        for (let i = 0; i < 6; i++) {
          odai_list[i] = odai_set[odai_selected_num][i];
        }

        let div = document.getElementById("odaistring");
        let html = "æœ¬æ—¥ã®ã‚µã‚¤ã‚³ãƒ­ãƒˆãƒ¼ã‚¯<br>";
        for (let i = 0; i < 6; i++) {
          html = html + numstr_utf8[i] + ":" + odai_list[i] + "<br>";
        }
        div.innerHTML = html;

        div = document.getElementById("odaistring_utf8");
        html = "æœ¬æ—¥ã®ã‚µã‚¤ã‚³ãƒ­ãƒˆãƒ¼ã‚¯";
        for (let i = 0; i < 6; i++) {
          html = html + " \n" + numstr_utf8[i] + ":" + odai_list[i];
        }
        div.innerHTML = html;

        div = document.getElementById("odaistring_qr");
        html = "æœ¬æ—¥ã®ã‚µã‚¤ã‚³ãƒ­ãƒˆãƒ¼ã‚¯";
        for (let i = 0; i < 6; i++) {
          html = html + " \n" + numstr_ascii[i] + ":" + odai_list[i];
        }
        div.innerHTML = html;

        let textarea = document.getElementById("odaiarea");
        let val = "æœ¬æ—¥ã®ãŠé¡Œã¯ã€æ¬¡ã®é€šã‚Šã§ã™ã€‚\n";
        for (let i = 0; i < 6; i++) {
          let t = odai_list[i][0].replace("â—‹â—‹", "ãƒãƒ«ãƒãƒ«");
          val = val + (i + 1) + "ã€" + t + "ã€‚\n";
        }
        textarea.textContent = val;
      }

      function setOdainNum() {
        let p = document.getElementById("odainum");
        p.innerHTML =
          "ãƒªã‚¹ãƒˆ No." +
          ("00" + (odai_selected_num + 1)).slice(-2) +
          " / " +
          ("00" + odai_set_num).slice(-2);
      }

      function onChangeOdaiset() {
        setOdai();
        setOdainNum();
        setOdaiQR();
      }

      function onPrevOdaiset() {
        odai_selected_num = odai_selected_num - 1;
        if (odai_selected_num < 0) {
          odai_selected_num = odai_set_num - 1;
        }
        onChangeOdaiset();
      }

      function onNextOdaiset() {
        odai_selected_num = odai_selected_num + 1;
        if (odai_selected_num >= odai_set_num) {
          odai_selected_num = 0;
        }
        onChangeOdaiset();
      }

      function onRebuildOdai() {
        initOdai();
        onChangeOdaiset();
      }

      function onCopyMessage() {
        let text = document.getElementById("odaistring_utf8").innerText;
        let area = document.createElement("textarea");
        area.textContent = text;
        document.body.appendChild(area);
        area.select();
        document.execCommand("copy");
        document.body.removeChild(area);
      }

      function confettiAnime() {
        confetti({
          origin: {
            x: Math.random(),
            y: 0,
          },
          particleCount: 12,
          ticks: 1000,
          zIndex: -1,
          colors: [
            "#ff9e9e",
            "#ff9eff",
            "#9e9eff",
            "#9effff",
            "#9eff9e",
            "#ffff9e",
          ],
        });
      }

      initOdai();
    </script>
    <style>
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #444;
          color: #e4e4e4;
        }
        a {
          color: #e39777;
        }
        img {
          filter: grayscale(30%);
        }
      }

      html {
        touch-action: manipulation;
      }
      html[theme="dark-mode"] {
        filter: invert(1) hue-rotate(180deg);
      }

      body {
        -webkit-text-size-adjust: 100%;
        font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN",
          "Hiragino Sans", Meiryo, sans-serif;
      }

      h1,
      h2,
      p {
        text-align: center;
      }

      a[target="_blank"][rel="noopener noreferrer"] {
        padding-right: 15px;
        background: url(external_link.png) right center/11px auto no-repeat;
      }

      div.button {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      table.qrimage {
        background-color: #fff;
      }

      table.odai {
        border: 1px solid #ccc;
        border-collapse: separate;
        border-radius: 10px;
        border-spacing: 0;
        padding: 10px 15px;

        th,
        td {
          border-bottom: 1px solid #ccc;
          padding: 10px 20px;
        }

        th {
          border-right: 1px solid #ccc;
        }

        tr {
          &:first-child {
            th {
              border-radius: 10px 0 0 0;
            }

            td {
              border-radius: 0 10px 0 0;
            }
          }

          &:last-child {
            th {
              border-bottom: none;
              border-radius: 0 0 0 10px;
            }

            td {
              border-bottom: none;
              border-radius: 0 0 10px 0;
            }
          }
        }
      }

      table {
        width: 300px;
        margin-left: auto;
        margin-right: auto;
        font-family: "ãƒ’ãƒ©ã‚®ãƒä¸¸ã‚´ Pro W4", "ãƒ’ãƒ©ã‚®ãƒä¸¸ã‚´ Pro",
          "Hiragino Maru Gothic Pro", "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3",
          "Hiragino Kaku Gothic Pro", "HGä¸¸ï½ºï¾ï½¼ï½¯ï½¸M-PRO", "HGMaruGothicMPRO";
      }
    </style>
  </head>

  <body>
    <h1>ğŸ² ã‚µã‚¤ã‚³ãƒ­ãƒˆãƒ¼ã‚¯ ğŸ²</h1>
    <h2>ãŠé¡Œãƒªã‚¹ãƒˆ</h2>
    <table summary="ãŠé¡Œ" class="odai">
      <tbody>
        <tr>
          <td colspan="2">
            <div id="odaistring"></div>
            <div hidden id="odaistring_utf8"></div>
            <div hidden id="odaistring_qr"></div>
            <textarea hidden id="odaiarea"></textarea>
            <script>
              setOdai();
            </script>
            <hr />
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td>
            <div class="button">
              <button id="speechButton">èª­ã¿ä¸Šã’ã‚‹</button>
            </div>
            <script>
              const text = document.querySelector("#odaiarea");
              const button = document.querySelector("#speechButton");
              button.addEventListener("click", function () {
                const uttr = new SpeechSynthesisUtterance(text.value);
                uttr.lang = "ja-JP";
                uttr.rate = 1.0;
                speechSynthesis.speak(uttr);
              });
            </script>
          </td>
          <td>
            <div class="button">
              <button onclick="onCopyMessage()">ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
            </div>
          </td>
        </tr>
      </tfoot>
    </table>

    <p>
      <script>
        document.write(getCurrentTimeStr());
      </script>
      ä½œæˆ
    </p>

    <table class="marumoji">
      <tbody>
        <tr>
          <td>
            <div class="button">
              <button onClick="onPrevOdaiset()">â—€ï¸</button>
            </div>
          </td>
          <td>
            <p id="odainum">
              <script>
                setOdainNum();
              </script>
            </p>
          </td>
          <td>
            <div class="button">
              <button onClick="onNextOdaiset()">â–¶ï¸</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <p></p>

    <p>
      <button onClick="onRebuildOdai();">ä½œã‚Šç›´ã™</button>
    </p>

    <hr />

    <h2>QRã‚³ãƒ¼ãƒ‰ã§ãŠé¡Œãƒªã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼</h2>
    <table class="qrimage">
      <tbody>
        <tr>
          <td>
            <p id="qrcode"></p>
            <script>
              setOdaiQR();
            </script>
          </td>
        </tr>
      </tbody>
    </table>
    <p>â€»ä¸¸æ•°å­—ã¯ã‚«ãƒƒã‚³ä»˜ãæ•°å­—ã«å¤‰æ›ã•ã‚Œã¾ã™</p>

    <hr />

    <p>
      å‡ºå…¸: ãƒ•ãƒªãƒ¼ç™¾ç§‘äº‹å…¸ã€ã‚¦ã‚£ã‚­ãƒšãƒ‡ã‚£ã‚¢ï¼ˆWikipediaï¼‰ã€<br />
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://ja.wikipedia.org/wiki/%E3%83%A9%E3%82%A4%E3%82%AA%E3%83%B3%E3%81%AE%E3%81%94%E3%81%8D%E3%81%92%E3%82%93%E3%82%88%E3%81%86"
        >ãƒ©ã‚¤ã‚ªãƒ³ã®ã”ãã’ã‚“ã‚ˆã†</a
      >
    </p>
    <script>
      let nowdate = new Date();
      let mon = nowdate.getMonth() + 1;
      let date = nowdate.getDate();
      if (mon == 9 && date == 3) {
        confettiAnime();
        setInterval(confettiAnime, 1000);
      }
    </script>
  </body>
</html>
